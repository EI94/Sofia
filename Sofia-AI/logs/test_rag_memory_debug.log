2025-07-26 22:45:09,784 | INFO | __main__ | ğŸš€ AVVIO TEST COMPLETO SOFIA AI RAG/MEMORY
2025-07-26 22:45:09,784 | INFO | __main__ | ğŸ§ª TEST LLM GATEWAY
2025-07-26 22:45:10,078 | INFO | app.gateways.llm | ğŸ” API Key trovata: NO
2025-07-26 22:45:10,078 | ERROR | app.gateways.llm | âŒ OPENAI_API_KEY non configurata
2025-07-26 22:45:10,078 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,078 | INFO | __main__ | âœ… LLM response: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,078 | INFO | __main__ | âœ… LLM gateway funziona
2025-07-26 22:45:10,078 | INFO | __main__ | ğŸ§ª TEST MEMORY GATEWAY
2025-07-26 22:45:10,078 | INFO | __main__ | âœ… Salvataggio memoria: False
2025-07-26 22:45:10,078 | INFO | __main__ | âœ… Recupero memoria: None
2025-07-26 22:45:10,078 | INFO | __main__ | ğŸ§ª INIZIO TEST RAG/MEMORY SYSTEM
2025-07-26 22:45:10,085 | INFO | app.chains.planner | ğŸ”§ Inizializzazione gateways...
2025-07-26 22:45:10,085 | INFO | app.chains.planner | âœ… Memory gateway inizializzato
2025-07-26 22:45:10,085 | INFO | app.chains.planner | âœ… Calendar gateway inizializzato
2025-07-26 22:45:10,085 | INFO | app.gateways.llm | ğŸ” API Key trovata: NO
2025-07-26 22:45:10,085 | ERROR | app.gateways.llm | âŒ OPENAI_API_KEY non configurata
2025-07-26 22:45:10,085 | INFO | app.chains.planner | âœ… LLM gateway inizializzato
2025-07-26 22:45:10,085 | INFO | app.chains.planner | ğŸ”§ Inizializzazione Sofia Planner...
2025-07-26 22:45:10,085 | INFO | app.chains.planner | âœ… Sofia Planner inizializzato
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… Importazioni completate
2025-07-26 22:45:10,085 | INFO | __main__ | ğŸ§ª Test 1: Verifica inizializzazione planner
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… Sofia planner inizializzato correttamente
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… Tipo planner: <class 'app.core.planner.manager_worker_planner.ManagerWorkerPlanner'>
2025-07-26 22:45:10,085 | INFO | __main__ | ğŸ§ª Test 2: Verifica gateways
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… LLM gateway presente
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… Memory gateway presente
2025-07-26 22:45:10,085 | INFO | __main__ | âœ… Calendar gateway presente
2025-07-26 22:45:10,085 | INFO | __main__ | ğŸ§ª Test 3: Messaggio semplice 'Ciao'
2025-07-26 22:45:10,085 | INFO | __main__ | ğŸ“± Test con telefono: 393271234567
2025-07-26 22:45:10,085 | INFO | __main__ | ğŸ’¬ Test con messaggio: Ciao
2025-07-26 22:45:10,085 | INFO | app.core.planner.manager_worker_planner | ğŸ” PLAN INIZIATO - Phone: 393271234567, Message: Ciao...
2025-07-26 22:45:10,085 | INFO | app.core.planner.manager_worker_planner | ğŸ” Contesto utente caricato: {'phone': '393271234567', 'name': None, 'lang': 'it', 'summary': '', 'turn_count': 0}
2025-07-26 22:45:10,085 | INFO | app.core.planner.manager_worker_planner | ğŸ” Classificazione stato in corso...
2025-07-26 22:45:10,085 | INFO | app.core.state.soft_state_machine | ğŸ” CLASSIFY STATE - Message: Ciao...
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” Invio prompt classificazione a LLM...
2025-07-26 22:45:10,086 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” LLM response classificazione: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratich...
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ Errore parsing JSON: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ Errore dettagliato: Expecting value: line 1 column 1 (char 0)
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ”„ Fallback intelligente: GREETING
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Stato classificato: GREETING (confidence: 0.6)
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Manager decide strategia...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ MANAGER DECIDE - Confidence: 0.6, State: GREETING
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | âœ… Confidence buona (0.6), reset clarification count
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Strategia scelta: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Manager decide: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Worker genera risposta...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ WORKER INIZIATO - Action: present_sofia
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Action: present_sofia, Instruction: Presentati come Sofia e chiedi come puoi aiutare
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Parahelp template caricato
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Prompt generato, lunghezza: 6371 caratteri
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Chiamata LLM in corso...
2025-07-26 22:45:10,086 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ LLM response ricevuta: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Response pulita: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Worker reply: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazione?
2025-07-26 22:45:10,086 | WARNING | app.core.planner.manager_worker_planner | âš ï¸ Loop rilevato, applico fallback
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Loop fallback gestito
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Fallback generico applicato
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Aggiornamento memoria...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Plan result: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,086 | INFO | __main__ | âœ… Risultato ricevuto: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,086 | INFO | __main__ | âœ… Tipo risultato: <class 'dict'>
2025-07-26 22:45:10,086 | INFO | __main__ | âœ… Chiavi risultato: ['reply', 'state', 'confidence', 'next_action']
2025-07-26 22:45:10,086 | INFO | __main__ | âœ… Reply presente: Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?...
2025-07-26 22:45:10,086 | INFO | __main__ | ğŸ§ª Test 4: Messaggio complesso 'Vorrei una consulenza per permesso di soggiorno'
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” PLAN INIZIATO - Phone: 393271234567, Message: Vorrei una consulenza per permesso di soggiorno...
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Contesto utente caricato: {'phone': '393271234567', 'name': None, 'lang': 'it', 'summary': '', 'turn_count': 0}
2025-07-26 22:45:10,086 | INFO | app.core.planner.manager_worker_planner | ğŸ” Classificazione stato in corso...
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” CLASSIFY STATE - Message: Vorrei una consulenza per permesso di soggiorno...
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” Invio prompt classificazione a LLM...
2025-07-26 22:45:10,086 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” LLM response classificazione: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratich...
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ” JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ Errore parsing JSON: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,086 | ERROR | app.core.state.soft_state_machine | âŒ Errore dettagliato: Expecting value: line 1 column 1 (char 0)
2025-07-26 22:45:10,086 | INFO | app.core.state.soft_state_machine | ğŸ”„ Fallback intelligente: PROPOSE_CONSULT
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Stato classificato: PROPOSE_CONSULT (confidence: 0.7)
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Manager decide strategia...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ MANAGER DECIDE - Confidence: 0.7, State: PROPOSE_CONSULT
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | âœ… Confidence buona (0.7), reset clarification count
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Strategia scelta: {'action': 'propose_consultation', 'instruction': 'Chiedi se preferisce online o in presenza'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Manager decide: {'action': 'propose_consultation', 'instruction': 'Chiedi se preferisce online o in presenza'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Worker genera risposta...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ WORKER INIZIATO - Action: propose_consultation
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Action: propose_consultation, Instruction: Chiedi se preferisce online o in presenza
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Parahelp template caricato
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Prompt generato, lunghezza: 6414 caratteri
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Chiamata LLM in corso...
2025-07-26 22:45:10,087 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ LLM response ricevuta: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Response pulita: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Worker reply: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazione?
2025-07-26 22:45:10,087 | WARNING | app.core.planner.manager_worker_planner | âš ï¸ Loop rilevato, applico fallback
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Loop fallback gestito
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Fallback generico applicato
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Aggiornamento memoria...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Plan result: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'PROPOSE_CONSULT', 'confidence': 0.7, 'next_action': None}
2025-07-26 22:45:10,087 | INFO | __main__ | âœ… Risultato complesso ricevuto: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'PROPOSE_CONSULT', 'confidence': 0.7, 'next_action': None}
2025-07-26 22:45:10,087 | INFO | __main__ | âœ… Reply complesso: Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?...
2025-07-26 22:45:10,087 | INFO | __main__ | ğŸ§ª Test 5: Verifica memoria persistente
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” PLAN INIZIATO - Phone: 393271234567, Message: Mi chiamo Pierpaolo...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Contesto utente caricato: {'phone': '393271234567', 'name': None, 'lang': 'it', 'summary': '', 'turn_count': 0}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Classificazione stato in corso...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” CLASSIFY STATE - Message: Mi chiamo Pierpaolo...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” Invio prompt classificazione a LLM...
2025-07-26 22:45:10,087 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” LLM response classificazione: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratich...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ Errore parsing JSON: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ Errore dettagliato: Expecting value: line 1 column 1 (char 0)
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ”„ Fallback intelligente: GREETING
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Stato classificato: GREETING (confidence: 0.6)
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Manager decide strategia...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ MANAGER DECIDE - Confidence: 0.6, State: GREETING
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | âœ… Confidence buona (0.6), reset clarification count
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Strategia scelta: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Manager decide: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Worker genera risposta...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ WORKER INIZIATO - Action: present_sofia
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Action: present_sofia, Instruction: Presentati come Sofia e chiedi come puoi aiutare
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Parahelp template caricato
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Prompt generato, lunghezza: 6386 caratteri
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Chiamata LLM in corso...
2025-07-26 22:45:10,087 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ LLM response ricevuta: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Response pulita: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Worker reply: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazione?
2025-07-26 22:45:10,087 | WARNING | app.core.planner.manager_worker_planner | âš ï¸ Loop rilevato, applico fallback
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Loop fallback gestito
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Fallback generico applicato
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Aggiornamento memoria...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Plan result: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,087 | INFO | __main__ | âœ… Secondo messaggio: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,087 | INFO | __main__ | âœ… Reply secondo messaggio: Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?...
2025-07-26 22:45:10,087 | INFO | __main__ | ğŸ§ª Test 6: Edge cases
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” PLAN INIZIATO - Phone: 393271234567, Message: ...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Contesto utente caricato: {'phone': '393271234567', 'name': None, 'lang': 'it', 'summary': '', 'turn_count': 0}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Classificazione stato in corso...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” CLASSIFY STATE - Message: ...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” Invio prompt classificazione a LLM...
2025-07-26 22:45:10,087 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” LLM response classificazione: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratich...
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ” JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ Errore parsing JSON: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ JSON pulito: Ciao! Sono Sofia, l'assistente virtuale dello Studio Immigrato di Milano. Posso aiutarti con pratiche di immigrazione, consulenze legali e appuntamenti. Come posso esserti utile oggi?
2025-07-26 22:45:10,087 | ERROR | app.core.state.soft_state_machine | âŒ Errore dettagliato: Expecting value: line 1 column 1 (char 0)
2025-07-26 22:45:10,087 | INFO | app.core.state.soft_state_machine | ğŸ”„ Fallback intelligente: GREETING
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Stato classificato: GREETING (confidence: 0.6)
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Manager decide strategia...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ MANAGER DECIDE - Confidence: 0.6, State: GREETING
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | âœ… Confidence buona (0.6), reset clarification count
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Strategia scelta: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Manager decide: {'action': 'present_sofia', 'instruction': 'Presentati come Sofia e chiedi come puoi aiutare'}
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ” Worker genera risposta...
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ WORKER INIZIATO - Action: present_sofia
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Action: present_sofia, Instruction: Presentati come Sofia e chiedi come puoi aiutare
2025-07-26 22:45:10,087 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Parahelp template caricato
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Prompt generato, lunghezza: 6367 caratteri
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Chiamata LLM in corso...
2025-07-26 22:45:10,088 | WARNING | app.gateways.llm | âš ï¸ Client OpenAI non disponibile, uso fallback
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ LLM response ricevuta: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Response pulita: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazion...
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”§ Worker reply: Ciao! Sono Sofia dello Studio Immigrato. Come posso aiutarti oggi con le tue pratiche di immigrazione?
2025-07-26 22:45:10,088 | WARNING | app.core.planner.manager_worker_planner | âš ï¸ Loop rilevato, applico fallback
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Loop fallback gestito
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ”„ Fallback generico applicato
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ” Aggiornamento memoria...
2025-07-26 22:45:10,088 | INFO | app.core.planner.manager_worker_planner | ğŸ¯ Plan result: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,088 | INFO | __main__ | âœ… Messaggio vuoto: {'reply': 'Mi dispiace, non ho capito bene. Puoi specificare meglio cosa ti serve?', 'state': 'GREETING', 'confidence': 0.6, 'next_action': None}
2025-07-26 22:45:10,088 | ERROR | __main__ | âŒ Errore messaggio None: 'NoneType' object is not subscriptable
2025-07-26 22:45:10,088 | INFO | __main__ | ğŸ§ª Test 7: Verifica memoria Firestore
2025-07-26 22:45:10,088 | INFO | __main__ | âœ… Dati utente da Firestore: None
2025-07-26 22:45:10,088 | INFO | __main__ | âœ… TEST RAG/MEMORY COMPLETATO
2025-07-26 22:45:10,088 | INFO | __main__ | ğŸ“Š RISULTATI FINALI:
2025-07-26 22:45:10,088 | INFO | __main__ |    LLM Gateway: âœ… OK
2025-07-26 22:45:10,088 | INFO | __main__ |    Memory Gateway: âœ… OK
2025-07-26 22:45:10,088 | INFO | __main__ |    Sistema Completo: âœ… OK
2025-07-26 22:45:10,088 | INFO | __main__ | ğŸ‰ TUTTI I TEST SUPERATI!
