name: Essential Tests

on:
  pull_request:
    branches: [ main, master, sofia-lite-boot, bulk-api-bootstrap ]
  push:
    branches: [ main, master, sofia-lite-boot, bulk-api-bootstrap ]

jobs:
  essential-tests:
    name: Essential Tests
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pytest pytest-asyncio
        
    - name: Run essential tests
      run: |
        echo "ðŸ§ª Running essential tests..."
        cd sofia_lite
        python -m pytest tests/test_simple_suite.py tests/test_config.py tests/test_simple.py -v
        
    - name: Test basic imports
      run: |
        echo "ðŸ“¦ Testing basic imports..."
        python -c "import sofia_lite; print('âœ… Sofia Lite imports OK')"
        python -c "from sofia_lite.agents.context import Context; print('âœ… Context imports OK')"
        python -c "from sofia_lite.agents.state import State; print('âœ… State imports OK')"
        
    - name: Test bulk API imports
      run: |
        echo "ðŸš€ Testing Bulk API imports..."
        python -c "import sofia_bulk_api; print('âœ… Bulk API imports OK')"
        
    - name: Success message
      run: |
        echo "ðŸŽ‰ All essential tests passed!"
        echo "âœ… Core functionality verified"
        echo "âœ… Imports working correctly"
        echo "âœ… Ready for deployment"
